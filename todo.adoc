= Todo

== Doing

=== Tasks

* check that we're running as root
* puppet: remove manifest after provision
* settings: validate jail conf sections (known fileds, types)
* start jail using the jail command rather than service
  * so a boot disabled jail can still be started as a one off
* restart jail when jail.conf changes
* error when rsync isn't present and things depend on it (like puppet prov)

=== Bugs

 * Cannot remove a jail with invalid jail.conf (fails on stopping)

=== Refactor

* rename 'enabled' to something better (maybe 'on_boot')
* Dry up provisioner/source enums using traits
* create a struct for zfs snapshots
* remove dependency on rsync for copying files recursively
* tests and validation for FreeBSD source
* refactor 'update_with_diff'
* jail state changes test are naive
* better way to deal with jail state changes
* test for restarting jail on config changes.

=== Nice to have

* flag provisioners that require jail to be running and handle when it's not the case.
* rsync provisioner
* pkg upgrade jails
* freebsd-update jails
* ability to split configuration file into 'include' snippets
* detect if provisioner has made changes
* jail resource limits
* make config more portable between machines
  * handle networking (jail IP changes)

=== Maybe

* ability to run provisioners before starting jail
* add 'host' mode to exec provisioner to execute on the jail host
