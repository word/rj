= Todo

== doing

* provision jail
  * shell script
  * puppet

== next up

 * settings: deny unknown fields everywhere
 * settings: validate source name
 * settings: validate provisioner names
 * settings: tidy up example/test config files
 * setup resolv.conf in test basejail

== backlog

=== First release

* confirmation before deleting all jails (and -f to force)
* tidy up and tests for main
* tidy up zfs code

=== Later

* freebsd-update jail
* config includes or conf.d style include
* parallel operation (create/upgrade etc)
  * need to resurrect ordering

== Done:

* fail on unknown config options
* apply config changes
* jail
  * start/stop
  * enable/disable
* create jail.conf
* logger
* cli args
* read config from a toml file
* zfs
  * refactor zfs into a struct
  * set zfs mountpoint: zfs set mountpoint=/jails zroot/jails
  * zfs snapshot method
  * zfs clone method
* try testing commands with mockall

== What makes a jail?

* zfs data set
* jails.conf config entry
* provisioned config (configuration puppet or whatever)
* processes
* network socket
* rc service

* think about config versioning!

== Config layout

/usr/local/etc/rj.conf
/usr/local/etc/rj.conf.d/

== CLI interface

bring up new jails

----
rj create <jailname>
----

upgrade jail
 * stop jail
 * freebsd-update
 * start jail
 * optional release flag

----
rj upgrade <jailname> -r <release>
----

show outdated jails
 * compare to the release in config file
 * lookup the latest patch release
   * or just run freebsd-update to see if anything is outstanding

----
rj outdated
----

----
rj rm <jailname>
----

reserved for bundled config?

----
rj apply
----
